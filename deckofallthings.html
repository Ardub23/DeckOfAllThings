<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Deck of All Things</title>
        <style>
            * {
                box-sizing: border-box;
            }
            body {
                min-height: 100vh;
                margin: 0;
                padding: 10px;
                font-family: Arial, Helvetica, sans-serif;
                background: rgb(31, 31, 31);
                color: rgb(247, 247, 247);
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                row-gap: 40px;
            }
            .cardNameInput {
                font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                font-weight: bold;
                font-size: 14pt;
                text-align: center;
                background: rgba(0, 0, 0, 0);
                color: white;
            }
            .cardDescInput {
                flex: 1;
                resize: none;
                font-family: Arial, Helvetica, sans-serif;
                font-size: 12pt;
                background: rgba(0, 0, 0, 0);
                color: white;
            }
            .customCard {
                background: rgb(70, 70, 70);
                padding: 5px;
                border-style: solid;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
                flex: 1;
            }
            .customCardContainer {
                width: 20%;
                max-width: 360px;
                height: 288px;
                padding: 5px;
                float: left;
                display: flex;
                flex-direction: column;
            }
            @media screen and (max-width: 1440px) {
                .customCardContainer {
                    width: 25%;
                }
            }
            @media screen and (max-width: 1080px) {
                .customCardContainer {
                    width: 33%;
                }
            }
            @media screen and (max-width: 720px) {
                .customCardContainer {
                    width: 50%;
                }
            }
            @media screen and (max-width: 360px) {
                .customCardContainer {
                    width: 100%;
                }
            }
            .fullOrDraw {
                text-align: center;
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 15px;
            }
            @media screen and (max-width: 400px) {
                .fullOrDraw {
                    flex-direction: column;
                }
            }
            .radioContainer {
                display: flex;
                padding: 5px 0px;
                align-items: flex-start;
            }
            .nowrap {
                white-space: nowrap;
            }
            #disclaimer {
                font-size: smaller;
                background-color: rgb(100, 100, 100);
                padding: 10px;
                order: 99;
            }
            .drawnCard {
                background: rgb(70, 70, 70);
                margin: 15px;
                padding: 0px 25px 0px 25px;
                border-style: solid;
                border-radius: 10px;
                max-width: 300px;
            }
            .drawnCardName {
                font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                text-align: center;
            }
            .initialButton {
                max-width: 100%;
                background: rgb(50, 0, 100);
                text-decoration: none;
                text-align: center;
                font-weight: bold;
                padding: 10px;
                margin: 5px;
                display: inline-flex;
                flex-direction: column;
                border-style: solid;
                border-color: rgb(230, 140, 255);
                border-radius: 15px;
                cursor: pointer;
            }
            .initialButton > * {
                max-width: 192px;
                width: auto;
                line-height: 1.5em;
                vertical-align: center;
            }
            .declaredDrawsBox {
                display: inline-flex;
                height: 2em;
                line-height: 2em;
            }
            .declaredDrawsBox > * {
                width: 2em;
            }
            .minusButton,
            .plusButton {
                -webkit-touch-callout: none; /* Disable Android and iOS callouts */
                -webkit-user-select: none; /* Disable Chrome and Safari text selection */
                -khtml-user-select: none; /* Disable Konqueror text selection */
                -moz-user-select: none; /* Disable Firefox text selection */
                -ms-user-select: none; /* Disable Internet Explorer text selection */
                user-select: none; /* Disable text selection in modern browsers */
            }
            .minusButton {
                background: rgb(127, 0, 0);
                
            }
            .minusButton:hover {
                background: rgb(160, 0, 0);
            }
            .minusButton:active {
                background: rgb(64, 0, 0);
            }
            .plusButton {
                background: rgb(0, 127, 0);

            }
            .plusButton:hover {
                background: rgb(0, 160, 0);
            }
            .plusButton:active {
                background: rgb(0, 64, 0);
            }
            .declaredDrawsInput {
                text-align: center;
                background: transparent;
                color: white;
                font-weight: bold;
            }
            .numInput {
                width: 2.5em;
            }
            input[type="number"]::-webkit-inner-spin-button,
            input[type="number"]::-webkit-outer-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
            input[type="number"] {
                -moz-appearance: textfield;
            }
        </style>
    </head>
    <body>
        <div id="main">
            <div id="initialConfig">
                <h2>A deck of wondrous power is presented to you&hellip;</h2>

                <div class="initialButton" id="drawRandomButton" onclick="readyDeck('random')">
                    <img src="images/icon_drawrandom.png" />
                    <div onclick="event.stopPropagation()">
                        <label for="initRandDeclInput">Draw </label>
                        <div class="declaredDrawsBox">
                            <span class="minusButton" onclick="adjustDeclaredDraws(-1)">&minus;</span>
                            <input class="declaredDrawsInput" id="initRandDeclInput" type="number" value=1 min=1 onchange="setDeclaredDraws(l('initRandDeclInput'))">
                            <span class="plusButton" onclick="adjustDeclaredDraws(1)">+</span>
                        </div>
                        <label for="initRandDeclInput"> from a mysterious deck (13 or 22 cards)</label>
                    </div>
                </div>
                <div class="initialButton" id="drawPartialButton" onclick="readyDeck('partial')">
                    <img src="images/icon_drawpartial.png" />
                    <div onclick="event.stopPropagation()">
                        <label for="initPartDeclInput">Draw </label>
                        <div class="declaredDrawsBox">
                            <span class="minusButton" onclick="adjustDeclaredDraws(-1)">&minus;</span>
                            <input class="declaredDrawsInput" id="initPartDeclInput" type="number" value=1 min=1 onchange="setDeclaredDraws(l('initPartDeclInput'))">
                            <span class="plusButton" onclick="adjustDeclaredDraws(1)">+</span>
                        </div>
                        <label for="initPartDeclInput"> from a partial deck (13 cards)</label>
                    </div>
                </div>
                <div class="initialButton" id="drawFullButton" onclick="readyDeck('full')">
                    <img src="images/icon_drawfull.png" />
                    <div onclick="event.stopPropagation()">
                        <label for="initFullDeclInput">Draw </label>
                        <div class="declaredDrawsBox">
                            <span class="minusButton" onclick="adjustDeclaredDraws(-1)">&minus;</span>
                            <input class="declaredDrawsInput" id="initFullDeclInput" type="number" value=1 min=1 onchange="setDeclaredDraws(l('initFullDeclInput'))">
                            <span class="plusButton" onclick="adjustDeclaredDraws(1)">+</span>
                        </div>
                        <label for="initFullDeclInput"> from a full deck (22 cards)</label>
                    </div>
                </div>
                <div class="initialButton" id="drawAllButton" onclick="readyDeck('all')">
                    <img src="images/icon_drawall.png" />
                    <div onclick="event.stopPropagation()">
                        <label for="initAllDeclInput">Draw </label>
                        <div class="declaredDrawsBox">
                            <span class="minusButton" onclick="adjustDeclaredDraws(-1)">&minus;</span>
                            <input class="declaredDrawsInput" id="initAllDeclInput" type="number" value=1 min=1 onchange="setDeclaredDraws(l('initAllDeclInput'))">
                            <span class="plusButton" onclick="adjustDeclaredDraws(1)">+</span>
                        </div>
                        <label for="initAllDeclInput"> from an expanded homebrew deck <span id="allDeckCount"></span></label>
                    </div>
                </div>

                <hr />
                <div class="initialButton" id="customizeButton" onclick="customize()">
                    <img src="images/square.png">
                    Customize deck
                </div>
                <div class="initialButton" id="drawAllButton" onclick="importDeck()">
                    <img src="images/square.png" />
                    Import deck
                </div>
            </div>

            <div id="customMenu" hidden>
                <h2>Deck customization</h2>

                <h3 id="custCardSrcHeader">Card sources</h3>
                <label id="custCardSrcLbl" for="custCardSrcSelector">Use cards from: </label>
                <select id="custCardSrcSelector" name="custCardSrcSelector" value="all" onchange="custCardSrc = l('custCardSrcSelector').value;">
                    <option value="partial">the partial deck of 13 cards</option>
                    <option value="full">the full deck of 22 cards</option>
                    <option value="all">the full deck plus homebrew cards</option>
                    <option value="homebrew">homebrew cards only</option>
                </select>

                <h3>Wildness and worth</h3>
                <p>You can filter cards based on how wild their effects are and how good they are for the player who draws them. Each card is assigned a "wildness value", from the tame cards with simple and straightforward effects, to the earth-shattering and often very disruptive cards. Each also has a "worth value", from the disastrous to the miraculous. These options remove cards from the deck; each card in the deck is still equally likely to be drawn.</p>
                <p>
                    <select id="custWildStrSelector" name="custWildStrSelector" value="off" onchange="setCustWild()">
                        <option value="off">Don't bias cards by wildness</option>
                        <option value="weak">Weakly bias toward&hellip;</option>
                        <option value="strong">Strongly bias toward&hellip;</option>
                    </select>
                    <select id="custWildValSelector" name="custWildValSelector" value="0.5" onchange="setCustWild()">
                        <option value="0.0">very tame cards</option>
                        <option value="0.25">tame cards</option>
                        <option value="0.5">middling cards</option>
                        <option value="0.75">wild cards</option>
                        <option value="1.0">very wild cards</option>
                    </select>
                </p>
                <p>
                    <select id="custWorthStrSelector" name="custWorthStrSelector" value="off" onchange="setCustWorth()">
                        <option value="off">Don't bias cards by worth</option>
                        <option value="weak">Weakly bias toward&hellip;</option>
                        <option value="strong">Strongly bias toward&hellip;</option>
                    </select>
                    <select id="custWorthValSelector" name="custWorthValSelector" value="0.5" onchange="setCustWorth()">
                        <option value="0.0">very bad cards</option>
                        <option value="0.25">bad cards</option>
                        <option value="0.5">so-so cards</option>
                        <option value="0.75">good cards</option>
                        <option value="1.0">very good cards</option>
                    </select>
                </p>

                <h3>Experience and level-based effects</h3>
                <div class="radioContainer">
                    <input type="radio" name="custXP" id="custXPDefault" value="default" onclick="custXP = 'default'" checked />
                    <label for="custXPDefault">Use effects that involve experience points (default)</label>
                </div>
                <div class="radioContainer">
                    <input type="radio" name="custXP" id="custXPNoXP" value="noxp" onclick="custXP = 'noxp'" />
                    <label for="custXPNoXP">Replace XP-based effects with ones that don't use XP, but may affect character levels</label>
                </div>
                <div class="radioContainer">
                    <input type="radio" name="custXP" id="custXPNoLevel" value="nolevel" onclick="custXP = 'nolevel'" />
                    <label for="custXPNoLevel">Replace XP-based effects with ones that can't affect character levels</label>
                </div>

                <h3>Finish</h3>
                <p>The buttons below will create a deck based on your parameters.</p>
                <div class="fullOrDraw">
                    <div><button id="customFullCustomBtn" type="button" onclick="finishCustomization(); fullCustomize();">Customize individual cards&hellip;</button></div>
                    <div class="nowrap">&ndash; OR &ndash;</div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <div>
                            <label for="custDeclaredDraws">How many cards will you draw?</label>
                            <input class="declaredDrawsInput" id="custDeclaredDraws" type="number" value=1 min=1 onchange="setDeclaredDraws(l('custDeclaredDraws'))" />
                        </div>
                        <button id="custDrawButton" type="button" onclick="finishCustomization(); draw();">Draw!</button>
                    </div>
                </div>
                <!--<table class="fullOrDraw">
                    <tr>
                        <td></td>
                        <td class="nowrap" style="padding: 15px">&ndash; OR &ndash;</td>
                        <td style="display: flex; flex-direction: column; align-items: center;">
                            <div>
                                
                            </div>
                            <button id="custDrawButton" type="button" onclick="finishCustomization(); draw();">Draw!</button>
                        </td>
                    </tr>
                </table>-->
            </div>

            <div id="fullCustomMenu" hidden>
                <h2>Card customization</h2>

                <div id="fullCustomCardsNode"></div>

                <div id="fullCustomMenuFooter" style="clear: left;">
                    <button id="addCustomCardBtn" type="button" onclick="addCustomCard()">Add another card</button>
                    <p>
                        <label for="fullDeclaredDrawsInput">How many cards will you draw?</label>
                        <input class="declaredDrawsInput" id="fullDeclaredDrawsInput" type="number" value=1 min=1 onchange="setDeclaredDraws(l('fullDeclaredDrawsInput'))" />
                    </p>
                    <button id="fullDrawButton" type="button" onclick="finishFullCustomization()">Draw!</button>
                </div>
            </div>

            <div id="importMenu" hidden>
                <h2>Import deck</h2>

                <div><label for="importTextarea">Paste your exported deck below.</label></div>
                <textarea id="importTextarea"></textarea>
                <p>Import and then&hellip;</p>
                <table class="fullOrDraw">
                    <tr>
                        <td><button id="importFullCustomBtn" type="button" onclick="importAndThen(fullCustomize)">Customize individual cards&hellip;</button></td>
                        <td class="nowrap" style="padding: 15px">&ndash; OR &ndash;</td>
                        <td style="display: flex; flex-direction: column; align-items: center;">
                            <div>
                                <label for="importDeclaredDraws">How many cards will you draw?</label>
                                <input class="declaredDrawsInput" id="importDeclaredDraws" type="number" value=1 min=1 onchange="setDeclaredDraws(l('importDeclaredDraws'))" />
                            </div>
                            <button id="importDrawButton" type="button" onclick="importAndThen(draw)">Draw!</button>
                        </td>
                    </tr>
                </table>
            </div>

            <div id="drawingNode" hidden>
                <h2>Let's see what you've drawn&hellip;</h2>

                <div id="drawnCards"></div>
                <div id="drawingFooter">
                    <div id="proceedNode">
                        <p id="proceedLabel"></p>
                        <div id="proceedButtonHolder">
                            <button id="drawMoreButton" type="button" onclick="drawMore()" style="margin-right: 5px;">Yes</button>
                            <button id="proceedButton" type="button" onclick="lastCard = {}; draw();" style="margin-right: 5px;">Proceed</button>
                            <button id="noMoreButton" type="button" onclick="declaredDraws = 0;">No</button>
                        </div>
                    </div>
                    <div style="margin-top: 40px">
                        <label for="exportButton">Click this button to export the current deck to your clipboard. (Note: If any cards have been drawn which don't reappear in the deck, they'll be gone from the exported deck too.)</label>
                        <button id="exportButton" type="button" onclick="exportDeck()">Export deck</button>
                        <textarea id="exportedText" hidden></textarea>
                    </div>
                    <div style="margin-top: 10px">
                        <label for="startOverButton">Click this button to start completely over. (The current deck will be lost unless you've exported it.)</label>
                        <div></div>
                        <button id="startOverButton" type="button" onclick="startOver()">Start over</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="disclaimer">The Deck of All Things includes unofficial Fan Content permitted under the Fan Content Policy. Not approved/endorsed by Wizards. Portions of the materials used are from the <i>Dungeons & Dragons</i> 5th Edition Systems Reference Document, property of Wizards of the Coast. ©Wizards of the Coast LLC.</div>
        
        <script src="main.js"></script>
    </body>
</html>
